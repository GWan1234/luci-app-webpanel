<%+header%>

<%
local uci = require "luci.model.uci".cursor()
local panel_id = luci.http.formvalue("panel") or "panel1"
local panel = uci:get("webpanel", panel_id)
%>

<div class="cbi-map">
    <h2><%:Web Panel%>: <%=panel and panel.name or "N/A"%></h2>
    
    <% if panel then %>
    <div class="alert-message" style="margin-bottom: 10px">
        <a href="<%=luci.dispatcher.build_url('admin/services/webpanel/overview')%>">
            <%:Â« Back to all panels%>
        </a>
    </div>
    
    <iframe src="<%=panel.url%>" 
            style="width: <%=panel.width or '100%'%>; 
                   height: <%=panel.height or '800px'%>;
                   border: none;"
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups">
    </iframe>
    <% else %>
    <div class="alert-message error">
        <%:Panel configuration not found!%>
    </div>
    <% end %>
</div>

<%+footer%>
