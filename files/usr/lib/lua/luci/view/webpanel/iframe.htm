<%+header%>

<div class="cbi-map">
    <h2 name="content"><%=panel.name or "Web Panel"%></h2>
    
    <div class="cbi-map-descr">
        <%:Embedded web panel in OpenWRT interface%>
    </div>
    
    <fieldset class="cbi-section">
        <%
        local style = string.format("width: %s; height: %s; border: %s;", 
            panel.width or "100%", 
            panel.height or "600px", 
            (panel.border == "1" or panel.border == nil) and "1px solid #ccc" or "none")
        %>
        
        <iframe id="embedded-panel" 
                src="<%=panel.url%>" 
                style="<%=style%>"
                scrolling="<%=panel.scrolling == '0' and 'no' or 'yes'%>"
                allowfullscreen>
        </iframe>
        
        <% if panel.refresh and tonumber(panel.refresh) > 0 then %>
        <script type="text/javascript">
            setInterval(function() {
                var iframe = document.getElementById('embedded-panel');
                iframe.src = iframe.src;
            }, <%=tonumber(panel.refresh) * 1000%>);
        </script>
        <% end %>
    </fieldset>
    
    <div class="cbi-page-actions">
        <form class="inline" action="<%=edit_url%>">
            <input class="cbi-button cbi-button-apply" type="submit" value="<%:Edit Settings%>"/>
        </form>
    </div>
</div>

<%+footer%>
